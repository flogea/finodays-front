"use strict";(self.webpackChunkfinodays_front=self.webpackChunkfinodays_front||[]).push([[663],{6663:(e,a,t)=>{t.d(a,{offchainLookup:()=>g,offchainLookupSignature:()=>y});var r=t(5291),s=t(1344),n=t(9977),o=t(3678);class c extends n.G{constructor({callbackSelector:e,cause:a,data:t,extraData:r,sender:s,urls:n}){super(a.shortMessage||"An error occurred while fetching for an offchain result.",{cause:a,metaMessages:[...a.metaMessages||[],a.metaMessages?.length?"":[],"Offchain Gateway Call:",n&&["  Gateway URL(s):",...n.map((e=>`    ${(0,o.Gr)(e)}`))],`  Sender: ${s}`,`  Data: ${t}`,`  Callback selector: ${e}`,`  Extra data: ${r}`].flat()}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"OffchainLookupError"})}}class d extends n.G{constructor({result:e,url:a}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${(0,o.Gr)(a)}`,`Response: ${(0,s.P)(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"OffchainLookupResponseMalformedError"})}}class l extends n.G{constructor({sender:e,to:a}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${a}`,`OffchainLookup sender address: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"OffchainLookupSenderMismatchError"})}}var u=t(8822),i=t(1856),f=t(2546),h=t(2960),b=t(7451),p=t(9040),w=t(5493);const y="0x556f1830",m={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};async function g(e,{blockNumber:a,blockTag:t,data:n,to:o}){const{args:y}=(0,i.p)({data:n,abi:[m]}),[g,k,O,x,G]=y;try{if(!function(e,a){if(!(0,b.U)(e))throw new h.b({address:e});if(!(0,b.U)(a))throw new h.b({address:a});return e.toLowerCase()===a.toLowerCase()}(o,g))throw new l({sender:g,to:o});const n=await async function({data:e,sender:a,urls:t}){let r=new Error("An unknown error occurred.");for(let n=0;n<t.length;n++){const o=t[n],c=o.includes("{sender}")||o.includes("{data}")?"GET":"POST",l="POST"===c?{data:e,sender:a}:void 0;try{const t=await fetch(o.replace("{sender}",a).replace("{data}",e),{body:JSON.stringify(l),method:c});let n;if(n=t.headers.get("Content-Type")?.startsWith("application/json")?(await t.json()).data:await t.text(),!t.ok){r=new u.Gg({body:l,details:(0,s.P)(n.error)||t.statusText,headers:t.headers,status:t.status,url:o});continue}if(!(0,w.v)(n)){r=new d({result:n,url:o});continue}return n}catch(e){r=new u.Gg({body:l,details:e.message,url:o})}}throw r}({data:O,sender:g,urls:k}),{data:c}=await(0,r.R)(e,{blockNumber:a,blockTag:t,data:(0,p.zo)([x,(0,f.E)([{type:"bytes"},{type:"bytes"}],[n,G])]),to:o});return c}catch(e){throw new c({callbackSelector:x,cause:e,data:n,extraData:G,sender:g,urls:k})}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVEsU0FBVXBELEdBQU8sQ0FDbEZnRCxLQUFNSyxLQUFLakMsVUFBVTRCLEdBQ3JCRixXQUVKLElBQUkzQixFQU9KLEdBTElBLEVBREErQixFQUFTSSxRQUFRQyxJQUFJLGlCQUFpQkMsV0FBVywyQkFDakNOLEVBQVNPLFFBQVF6RCxXQUdqQmtELEVBQVNRLFFBRXhCUixFQUFTUyxHQUFJLENBQ2RoQixFQUFRLElBQUksS0FBaUIsQ0FDekJLLE9BQ0FZLFNBQVMsRUFBQXhDLEVBQUEsR0FBVUQsRUFBT3dCLFFBQVVPLEVBQVNXLFdBQzdDUCxRQUFTSixFQUFTSSxRQUNsQlEsT0FBUVosRUFBU1ksT0FDakJyRCxRQUVKLFFBQ0osQ0FDQSxLQUFLLEVBQUFzRCxFQUFBLEdBQU01QyxHQUFTLENBQ2hCd0IsRUFBUSxJQUFJekIsRUFBcUMsQ0FDN0NDLFNBQ0FWLFFBRUosUUFDSixDQUNBLE9BQU9VLENBQ1gsQ0FDQSxNQUFPNkMsR0FDSHJCLEVBQVEsSUFBSSxLQUFpQixDQUN6QkssT0FDQVksUUFBU0ksRUFBSUMsUUFDYnhELE9BRVIsQ0FDSixDQUNBLE1BQU1rQyxDQUNWLENBckU2QnVCLENBQVUsQ0FBRWxFLEtBQU1vQyxFQUFVbEMsU0FBUUMsVUFDakRILEtBQU1tRSxTQUFnQixFQUFBQyxFQUFBLEdBQUt0QyxFQUFRLENBQ3ZDQyxjQUNBQyxXQUNBaEMsTUFBTSxFQUFBcUUsRUFBQSxJQUFPLENBQ1R2RSxHQUNBLEVBQUF3RSxFQUFBLEdBQW9CLENBQUMsQ0FBRTVDLEtBQU0sU0FBVyxDQUFFQSxLQUFNLFVBQVksQ0FBQ1AsRUFBUWxCLE1BRXpFcUIsT0FFSixPQUFPNkMsQ0FDWCxDQUNBLE1BQU9ILEdBQ0gsTUFBTSxJQUFJcEUsRUFBb0IsQ0FDMUJFLG1CQUNBQyxNQUFPaUUsRUFDUGhFLE9BQ0FDLFlBQ0FDLFNBQ0FDLFFBRVIsQ0FDSixDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZmlub2RheXMtZnJvbnQvLi9ub2RlX21vZHVsZXMvdmllbS9kaXN0L2VzbS9lcnJvcnMvY2NpcC5qcyIsIndlYnBhY2s6Ly9maW5vZGF5cy1mcm9udC8uL25vZGVfbW9kdWxlcy92aWVtL2Rpc3QvZXNtL3V0aWxzL2NjaXAuanMiLCJ3ZWJwYWNrOi8vZmlub2RheXMtZnJvbnQvLi9ub2RlX21vZHVsZXMvdmllbS9kaXN0L2VzbS91dGlscy9hZGRyZXNzL2lzQWRkcmVzc0VxdWFsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN0cmluZ2lmeSB9IGZyb20gJy4uL3V0aWxzL3N0cmluZ2lmeS5qcyc7XG5pbXBvcnQgeyBCYXNlRXJyb3IgfSBmcm9tICcuL2Jhc2UuanMnO1xuaW1wb3J0IHsgZ2V0VXJsIH0gZnJvbSAnLi91dGlscy5qcyc7XG5leHBvcnQgY2xhc3MgT2ZmY2hhaW5Mb29rdXBFcnJvciBleHRlbmRzIEJhc2VFcnJvciB7XG4gICAgY29uc3RydWN0b3IoeyBjYWxsYmFja1NlbGVjdG9yLCBjYXVzZSwgZGF0YSwgZXh0cmFEYXRhLCBzZW5kZXIsIHVybHMsIH0pIHtcbiAgICAgICAgc3VwZXIoY2F1c2Uuc2hvcnRNZXNzYWdlIHx8XG4gICAgICAgICAgICAnQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgZm9yIGFuIG9mZmNoYWluIHJlc3VsdC4nLCB7XG4gICAgICAgICAgICBjYXVzZSxcbiAgICAgICAgICAgIG1ldGFNZXNzYWdlczogW1xuICAgICAgICAgICAgICAgIC4uLihjYXVzZS5tZXRhTWVzc2FnZXMgfHwgW10pLFxuICAgICAgICAgICAgICAgIGNhdXNlLm1ldGFNZXNzYWdlcz8ubGVuZ3RoID8gJycgOiBbXSxcbiAgICAgICAgICAgICAgICAnT2ZmY2hhaW4gR2F0ZXdheSBDYWxsOicsXG4gICAgICAgICAgICAgICAgdXJscyAmJiBbXG4gICAgICAgICAgICAgICAgICAgICcgIEdhdGV3YXkgVVJMKHMpOicsXG4gICAgICAgICAgICAgICAgICAgIC4uLnVybHMubWFwKCh1cmwpID0+IGAgICAgJHtnZXRVcmwodXJsKX1gKSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGAgIFNlbmRlcjogJHtzZW5kZXJ9YCxcbiAgICAgICAgICAgICAgICBgICBEYXRhOiAke2RhdGF9YCxcbiAgICAgICAgICAgICAgICBgICBDYWxsYmFjayBzZWxlY3RvcjogJHtjYWxsYmFja1NlbGVjdG9yfWAsXG4gICAgICAgICAgICAgICAgYCAgRXh0cmEgZGF0YTogJHtleHRyYURhdGF9YCxcbiAgICAgICAgICAgIF0uZmxhdCgpLFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogJ09mZmNoYWluTG9va3VwRXJyb3InXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBPZmZjaGFpbkxvb2t1cFJlc3BvbnNlTWFsZm9ybWVkRXJyb3IgZXh0ZW5kcyBCYXNlRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHsgcmVzdWx0LCB1cmwgfSkge1xuICAgICAgICBzdXBlcignT2ZmY2hhaW4gZ2F0ZXdheSByZXNwb25zZSBpcyBtYWxmb3JtZWQuIFJlc3BvbnNlIGRhdGEgbXVzdCBiZSBhIGhleCB2YWx1ZS4nLCB7XG4gICAgICAgICAgICBtZXRhTWVzc2FnZXM6IFtcbiAgICAgICAgICAgICAgICBgR2F0ZXdheSBVUkw6ICR7Z2V0VXJsKHVybCl9YCxcbiAgICAgICAgICAgICAgICBgUmVzcG9uc2U6ICR7c3RyaW5naWZ5KHJlc3VsdCl9YCxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAnT2ZmY2hhaW5Mb29rdXBSZXNwb25zZU1hbGZvcm1lZEVycm9yJ1xuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgT2ZmY2hhaW5Mb29rdXBTZW5kZXJNaXNtYXRjaEVycm9yIGV4dGVuZHMgQmFzZUVycm9yIHtcbiAgICBjb25zdHJ1Y3Rvcih7IHNlbmRlciwgdG8gfSkge1xuICAgICAgICBzdXBlcignUmV2ZXJ0ZWQgc2VuZGVyIGFkZHJlc3MgZG9lcyBub3QgbWF0Y2ggdGFyZ2V0IGNvbnRyYWN0IGFkZHJlc3MgKGB0b2ApLicsIHtcbiAgICAgICAgICAgIG1ldGFNZXNzYWdlczogW1xuICAgICAgICAgICAgICAgIGBDb250cmFjdCBhZGRyZXNzOiAke3RvfWAsXG4gICAgICAgICAgICAgICAgYE9mZmNoYWluTG9va3VwIHNlbmRlciBhZGRyZXNzOiAke3NlbmRlcn1gLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6ICdPZmZjaGFpbkxvb2t1cFNlbmRlck1pc21hdGNoRXJyb3InXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNjaXAuanMubWFwIiwiaW1wb3J0IHsgY2FsbCB9IGZyb20gJy4uL2FjdGlvbnMvcHVibGljL2NhbGwuanMnO1xuaW1wb3J0IHt9IGZyb20gJy4uL2Vycm9ycy9iYXNlLmpzJztcbmltcG9ydCB7IE9mZmNoYWluTG9va3VwRXJyb3IsIE9mZmNoYWluTG9va3VwUmVzcG9uc2VNYWxmb3JtZWRFcnJvciwgT2ZmY2hhaW5Mb29rdXBTZW5kZXJNaXNtYXRjaEVycm9yLCB9IGZyb20gJy4uL2Vycm9ycy9jY2lwLmpzJztcbmltcG9ydCB7IEh0dHBSZXF1ZXN0RXJyb3IgfSBmcm9tICcuLi9lcnJvcnMvcmVxdWVzdC5qcyc7XG5pbXBvcnQgeyBkZWNvZGVFcnJvclJlc3VsdCB9IGZyb20gJy4vYWJpL2RlY29kZUVycm9yUmVzdWx0LmpzJztcbmltcG9ydCB7IGVuY29kZUFiaVBhcmFtZXRlcnMgfSBmcm9tICcuL2FiaS9lbmNvZGVBYmlQYXJhbWV0ZXJzLmpzJztcbmltcG9ydCB7IGlzQWRkcmVzc0VxdWFsIH0gZnJvbSAnLi9hZGRyZXNzL2lzQWRkcmVzc0VxdWFsLmpzJztcbmltcG9ydCB7IGNvbmNhdCB9IGZyb20gJy4vZGF0YS9jb25jYXQuanMnO1xuaW1wb3J0IHsgaXNIZXggfSBmcm9tICcuL2RhdGEvaXNIZXguanMnO1xuaW1wb3J0IHsgc3RyaW5naWZ5IH0gZnJvbSAnLi9zdHJpbmdpZnkuanMnO1xuZXhwb3J0IGNvbnN0IG9mZmNoYWluTG9va3VwU2lnbmF0dXJlID0gJzB4NTU2ZjE4MzAnO1xuZXhwb3J0IGNvbnN0IG9mZmNoYWluTG9va3VwQWJpSXRlbSA9IHtcbiAgICBuYW1lOiAnT2ZmY2hhaW5Mb29rdXAnLFxuICAgIHR5cGU6ICdlcnJvcicsXG4gICAgaW5wdXRzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdzZW5kZXInLFxuICAgICAgICAgICAgdHlwZTogJ2FkZHJlc3MnLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAndXJscycsXG4gICAgICAgICAgICB0eXBlOiAnc3RyaW5nW10nLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnY2FsbERhdGEnLFxuICAgICAgICAgICAgdHlwZTogJ2J5dGVzJyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2NhbGxiYWNrRnVuY3Rpb24nLFxuICAgICAgICAgICAgdHlwZTogJ2J5dGVzNCcsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdleHRyYURhdGEnLFxuICAgICAgICAgICAgdHlwZTogJ2J5dGVzJyxcbiAgICAgICAgfSxcbiAgICBdLFxufTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBvZmZjaGFpbkxvb2t1cChjbGllbnQsIHsgYmxvY2tOdW1iZXIsIGJsb2NrVGFnLCBkYXRhLCB0bywgfSkge1xuICAgIGNvbnN0IHsgYXJncyB9ID0gZGVjb2RlRXJyb3JSZXN1bHQoe1xuICAgICAgICBkYXRhLFxuICAgICAgICBhYmk6IFtvZmZjaGFpbkxvb2t1cEFiaUl0ZW1dLFxuICAgIH0pO1xuICAgIGNvbnN0IFtzZW5kZXIsIHVybHMsIGNhbGxEYXRhLCBjYWxsYmFja1NlbGVjdG9yLCBleHRyYURhdGFdID0gYXJncztcbiAgICB0cnkge1xuICAgICAgICBpZiAoIWlzQWRkcmVzc0VxdWFsKHRvLCBzZW5kZXIpKVxuICAgICAgICAgICAgdGhyb3cgbmV3IE9mZmNoYWluTG9va3VwU2VuZGVyTWlzbWF0Y2hFcnJvcih7IHNlbmRlciwgdG8gfSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNjaXBGZXRjaCh7IGRhdGE6IGNhbGxEYXRhLCBzZW5kZXIsIHVybHMgfSk7XG4gICAgICAgIGNvbnN0IHsgZGF0YTogZGF0YV8gfSA9IGF3YWl0IGNhbGwoY2xpZW50LCB7XG4gICAgICAgICAgICBibG9ja051bWJlcixcbiAgICAgICAgICAgIGJsb2NrVGFnLFxuICAgICAgICAgICAgZGF0YTogY29uY2F0KFtcbiAgICAgICAgICAgICAgICBjYWxsYmFja1NlbGVjdG9yLFxuICAgICAgICAgICAgICAgIGVuY29kZUFiaVBhcmFtZXRlcnMoW3sgdHlwZTogJ2J5dGVzJyB9LCB7IHR5cGU6ICdieXRlcycgfV0sIFtyZXN1bHQsIGV4dHJhRGF0YV0pLFxuICAgICAgICAgICAgXSksXG4gICAgICAgICAgICB0byxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkYXRhXztcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICB0aHJvdyBuZXcgT2ZmY2hhaW5Mb29rdXBFcnJvcih7XG4gICAgICAgICAgICBjYWxsYmFja1NlbGVjdG9yLFxuICAgICAgICAgICAgY2F1c2U6IGVycixcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBleHRyYURhdGEsXG4gICAgICAgICAgICBzZW5kZXIsXG4gICAgICAgICAgICB1cmxzLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2NpcEZldGNoKHsgZGF0YSwgc2VuZGVyLCB1cmxzLCB9KSB7XG4gICAgbGV0IGVycm9yID0gbmV3IEVycm9yKCdBbiB1bmtub3duIGVycm9yIG9jY3VycmVkLicpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdXJscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCB1cmwgPSB1cmxzW2ldO1xuICAgICAgICBjb25zdCBtZXRob2QgPSB1cmwuaW5jbHVkZXMoJ3tzZW5kZXJ9JykgfHwgdXJsLmluY2x1ZGVzKCd7ZGF0YX0nKSA/ICdHRVQnIDogJ1BPU1QnO1xuICAgICAgICBjb25zdCBib2R5ID0gbWV0aG9kID09PSAnUE9TVCcgPyB7IGRhdGEsIHNlbmRlciB9IDogdW5kZWZpbmVkO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwucmVwbGFjZSgne3NlbmRlcn0nLCBzZW5kZXIpLnJlcGxhY2UoJ3tkYXRhfScsIGRhdGEpLCB7XG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSksXG4gICAgICAgICAgICAgICAgbWV0aG9kLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsZXQgcmVzdWx0O1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdDb250ZW50LVR5cGUnKT8uc3RhcnRzV2l0aCgnYXBwbGljYXRpb24vanNvbicpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSkuZGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS50ZXh0KCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIGVycm9yID0gbmV3IEh0dHBSZXF1ZXN0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBib2R5LFxuICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiBzdHJpbmdpZnkocmVzdWx0LmVycm9yKSB8fCByZXNwb25zZS5zdGF0dXNUZXh0LFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiByZXNwb25zZS5oZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpc0hleChyZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgZXJyb3IgPSBuZXcgT2ZmY2hhaW5Mb29rdXBSZXNwb25zZU1hbGZvcm1lZEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICB1cmwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGVycm9yID0gbmV3IEh0dHBSZXF1ZXN0RXJyb3Ioe1xuICAgICAgICAgICAgICAgIGJvZHksXG4gICAgICAgICAgICAgICAgZGV0YWlsczogZXJyLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGhyb3cgZXJyb3I7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jY2lwLmpzLm1hcCIsImltcG9ydCB7IEludmFsaWRBZGRyZXNzRXJyb3IgfSBmcm9tICcuLi8uLi9lcnJvcnMvYWRkcmVzcy5qcyc7XG5pbXBvcnQgeyBpc0FkZHJlc3MgfSBmcm9tICcuL2lzQWRkcmVzcy5qcyc7XG5leHBvcnQgZnVuY3Rpb24gaXNBZGRyZXNzRXF1YWwoYSwgYikge1xuICAgIGlmICghaXNBZGRyZXNzKGEpKVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFkZHJlc3NFcnJvcih7IGFkZHJlc3M6IGEgfSk7XG4gICAgaWYgKCFpc0FkZHJlc3MoYikpXG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkQWRkcmVzc0Vycm9yKHsgYWRkcmVzczogYiB9KTtcbiAgICByZXR1cm4gYS50b0xvd2VyQ2FzZSgpID09PSBiLnRvTG93ZXJDYXNlKCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc0FkZHJlc3NFcXVhbC5qcy5tYXAiXSwibmFtZXMiOlsiT2ZmY2hhaW5Mb29rdXBFcnJvciIsImNvbnN0cnVjdG9yIiwiY2FsbGJhY2tTZWxlY3RvciIsImNhdXNlIiwiZGF0YSIsImV4dHJhRGF0YSIsInNlbmRlciIsInVybHMiLCJzdXBlciIsInNob3J0TWVzc2FnZSIsIm1ldGFNZXNzYWdlcyIsImxlbmd0aCIsIm1hcCIsInVybCIsImZsYXQiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInRoaXMiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIk9mZmNoYWluTG9va3VwUmVzcG9uc2VNYWxmb3JtZWRFcnJvciIsInJlc3VsdCIsInN0cmluZ2lmeSIsIk9mZmNoYWluTG9va3VwU2VuZGVyTWlzbWF0Y2hFcnJvciIsInRvIiwib2ZmY2hhaW5Mb29rdXBTaWduYXR1cmUiLCJvZmZjaGFpbkxvb2t1cEFiaUl0ZW0iLCJuYW1lIiwidHlwZSIsImlucHV0cyIsImFzeW5jIiwib2ZmY2hhaW5Mb29rdXAiLCJjbGllbnQiLCJibG9ja051bWJlciIsImJsb2NrVGFnIiwiYXJncyIsImRlY29kZUVycm9yUmVzdWx0IiwiYWJpIiwiY2FsbERhdGEiLCJhIiwiYiIsImlzQWRkcmVzcyIsImFkZHJlc3MiLCJ0b0xvd2VyQ2FzZSIsImlzQWRkcmVzc0VxdWFsIiwiZXJyb3IiLCJFcnJvciIsImkiLCJtZXRob2QiLCJpbmNsdWRlcyIsImJvZHkiLCJ1bmRlZmluZWQiLCJyZXNwb25zZSIsImZldGNoIiwicmVwbGFjZSIsIkpTT04iLCJoZWFkZXJzIiwiZ2V0Iiwic3RhcnRzV2l0aCIsImpzb24iLCJ0ZXh0Iiwib2siLCJkZXRhaWxzIiwic3RhdHVzVGV4dCIsInN0YXR1cyIsImlzSGV4IiwiZXJyIiwibWVzc2FnZSIsImNjaXBGZXRjaCIsImRhdGFfIiwiY2FsbCIsImNvbmNhdCIsImVuY29kZUFiaVBhcmFtZXRlcnMiXSwic291cmNlUm9vdCI6IiJ9